const domain=document.location.origin,data_url=domain+"/get_data",trace_url=domain+"/get_trace";let trace_data={};async function getData(t){let e=await fetch(t);return await e.json()}function updateColour(t,e){let a=[];for(let e=0;e<t;e++)a.push("#ff7f0e");for(let r=t;r<e;r++)a.push("#000000");let r={marker:{color:a,size:15}};Plotly.restyle("scatterPlot",r,1)}async function updateTrace(t){let e=new URL(trace_url);t&&e.searchParams.append("study_no",t);let a={x:[(trace_data=await getData(e)).x],y:[trace_data.y],name:trace_data.study_no};$("#dateSlider").slider({max:trace_data.x.length,value:1}),$("#dispDate b").text(trace_data.date[0]),await Plotly.restyle("scatterPlot",a,1),updateColour(1,trace_data.x.length)}function submitForm(){updateTrace(document.getElementById("studynoForm").elements[0].value)}function resizePlot(){let t=$("#scatterPlot").parent().width(),e=$("#scatterPlot").parent().height();Plotly.relayout("scatterPlot",{width:t,height:e})}async function main(){const t=await getData(data_url);let e={x:t.x,y:t.y,mode:"markers",type:"scatter",marker:{color:"#1f77b4"},name:"All data"};Plotly.newPlot("scatterPlot",[e,{x:[],y:[],mode:"lines+markers",type:"scatter",marker:{size:15,color:"#000000"},line:{color:"#000000"}}],{hovermode:"closest",title:"Auto-Encoder - Latent dimension",margin:{t:50,l:50,r:50,b:50}}),window.addEventListener("resize",resizePlot),$(".sidebar-toggle").click(function(){resizePlot()}),$("#listenSlider").change(function(){updateColour(this.value,this.max),$("#dispDate b").text(trace_data.date[this.value-1])})}main();